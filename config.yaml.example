# ===========================================
# PaperRadar 配置文件
# ===========================================

# 关键词配置 - 可根据需要添加或修改
keywords:
  - name: "Medical Image Analysis"
    description: "医学图像分析、医学影像AI、放射学、超声、CT、MRI"
    examples:
      - "medical image analysis, radiology AI, diagnostic imaging"
      - "CT, MRI, X-ray, ultrasound, mammography"
      - "medical image segmentation, detection, classification"

  - name: "Generative Models for Medical Imaging"
    description: "生成式模型在医学影像中的应用，包括3D高斯溅射、扩散模型等"
    examples:
      - "3D Gaussian Splatting, 3DGS, neural radiance fields, NeRF"
      - "diffusion model, denoising diffusion, DDPM, score-based generative model"
      - "medical image synthesis, image generation, reconstruction"

  - name: "Medical AI Safety and Security"
    description: "医疗AI安全，包括对抗攻击、提示注入、推理安全、模型鲁棒性"
    examples:
      - "adversarial attack, prompt injection, jailbreak, red teaming"
      - "inference security, model robustness, safety alignment"
      - "healthcare AI security, medical AI trustworthiness, reliability"

  - name: "Nuclear Medicine Imaging"
    description: "核医学成像、核医学影像、核医学诊断、核医学治疗"
    examples:
      - "nuclear medicine imaging, nuclear medicine diagnosis, nuclear medicine treatment"
      - "PET, SPECT, PET/CT, PET/MRI"
      - "nuclear medicine image segmentation, detection, classification"

  - name: "LLM Agent"
    description: "基于大语言模型的智能体、工具调用、自主决策、多智能体协作"
    examples:
      - "autonomous agent, tool use, function calling"
      - "planning, decision making, task execution"
      - "multi-agent, agent collaboration, agentic workflow"

  - name: "LLM Reasoning"
    description: "大模型推理能力、思维链、逻辑推理、数学推理"
    examples:
      - "chain of thought, step-by-step reasoning, CoT"
      - "mathematical reasoning, logical inference, problem solving"
      - "self-consistency, tree of thought, reasoning capability"

  - name: "AI for Science"
    description: "AI驱动科学发现、科学计算、科学建模与跨学科科学智能"
    examples:
      - "AI for science, scientific discovery, scientific machine learning"
      - "computational science, scientific modeling, simulation"
      - "materials discovery, protein design, drug discovery"

  - name: "Agent for Healthcare"
    description: "医疗健康场景智能体、临床决策支持、医疗流程自动化"
    examples:
      - "healthcare agent, clinical agent, medical assistant"
      - "clinical decision support, care pathway, triage"
      - "hospital workflow automation, patient management"

  - name: "Agent for Medical Image"
    description: "面向医学影像任务的智能体，如影像诊断、报告生成与交互分析"
    examples:
      - "medical imaging agent, radiology agent, vision-language agent"
      - "medical image diagnosis, report generation, interactive analysis"
      - "agentic medical image segmentation, detection, interpretation"

# 预印本配置 (arXiv + bioRxiv + medRxiv)
preprints:
  enabled: true

  # arXiv 预印本源
  arxiv:
    enabled: true
    categories: "cs.AI+cs.CV+cs.CL+cs.LG+eess.IV+q-bio.QM"
    max_papers_per_day: 0  # 0 表示不限制
    # 重试配置 - 当 RSS 为空时的重试策略
    retry_interval_minutes: 30  # 每次重试间隔（分钟）
    max_retry_hours: 5  # 最大等待时间（小时）

  # RSS 型预印本源（bioRxiv / medRxiv）
  max_papers_per_source: 30
  sources:
    - name: "bioRxiv"
      key: "biorxiv"
      enabled: true
    - name: "medRxiv"
      key: "medrxiv"
      enabled: true

# 期刊配置 (Nature, NEJM 等)
journals:
  enabled: true
  max_papers_per_journal: 30
  sources:
    # Nature 系列
    - name: "Nature"
      key: "nature"
      enabled: true
    - name: "Nature Communications"
      key: "nature_communications"
      enabled: true
    - name: "Nature Medicine"
      key: "nature_medicine"
      enabled: true
    - name: "Nature Methods"
      key: "nature_methods"
      enabled: true
    - name: "Nature Machine Intelligence"
      key: "nature_machine_intelligence"
      enabled: true
    - name: "Nature Biomedical Engineering"
      key: "nature_biomedical_engineering"
      enabled: true
    - name: "Nature Computational Science"
      key: "nature_computational_science"
      enabled: true
    # 医学期刊
    - name: "NEJM"
      key: "nejm"
      enabled: true
    # Note: NEJM AI RSS feed has been discontinued by the publisher
    # - name: "NEJM AI"
    #   key: "nejm_ai"
    #   enabled: false
    - name: "Lancet"
      key: "lancet"
      enabled: false
    - name: "Lancet Digital Health"
      key: "lancet_digital_health"
      enabled: true
    # Cell Press 系列
    - name: "Cell"
      key: "cell"
      enabled: true
    - name: "Cancer Cell"
      key: "cancer_cell"
      enabled: true
    - name: "Cell Reports Medicine"
      key: "cell_reports_medicine"
      enabled: true
    # Science 系列
    - name: "Science"
      key: "science"
      enabled: true
    - name: "Science Advances"
      key: "science_advances"
      enabled: true

# LLM 配置 - 双 Agent 架构（支持列表配置，多 provider fallback）
llm:
  # 轻量级 LLM - 用于快速筛选匹配 (OpenAI 兼容格式)
  # 支持列表配置，按顺序 fallback，每个 provider 重试 3 次
  light:
    - api_base: "${LIGHT_LLM_API_BASE}"
      api_key: "${LIGHT_LLM_API_KEY}"
      model: "${LIGHT_LLM_MODEL}"
      temperature: 0.1
      max_tokens: 500
    - api_base: "${FALLBACK_LLM_API_BASE}"
      api_key: "${FALLBACK_LLM_API_KEY}"
      model: "[hm-usage]gemini-3-flash-preview"
      temperature: 0.1
      max_tokens: 500
    - api_base: "${FALLBACK_LLM_API_BASE}"
      api_key: "${FALLBACK_LLM_API_KEY}"
      model: "[付费-usage]gemini-3-flash"
      temperature: 0.1
      max_tokens: 500

  # 重量级多模态 LLM - 用于 PDF 深度分析 (OpenAI 兼容格式)
  heavy:
    - api_base: "${HEAVY_LLM_API_BASE}"
      api_key: "${HEAVY_LLM_API_KEY}"
      model: "${HEAVY_LLM_MODEL}"
      temperature: 0.3
      max_tokens: 40000
      rate_limit:
        requests_per_minute: 60  # 每分钟最大请求数
    - api_base: "${FALLBACK_LLM_API_BASE}"
      api_key: "${FALLBACK_LLM_API_KEY}"
      model: "[hm-usage]gemini-3-flash-preview"
      temperature: 0.3
      max_tokens: 40000
      rate_limit:
        requests_per_minute: 60
    - api_base: "${FALLBACK_LLM_API_BASE}"
      api_key: "${FALLBACK_LLM_API_KEY}"
      model: "[付费-usage]gemini-3-flash"
      temperature: 0.3
      max_tokens: 40000
      rate_limit:
        requests_per_minute: 60

  # 总结 Agent - 复用 light 或 heavy
  summary:
    use: "light"  # 可选: "light" 或 "heavy"
    temperature: 0.5
    max_tokens: 2000

# 输出配置
output:
  language: "Chinese"
  formats:
    markdown:
      enabled: true
      path: "./reports/"
    json:
      enabled: true
      path: "./reports/json/"

# 邮件通知配置 - 通过 Email Proxy 发送每日报告
email:
  enabled: true
  api_url: "${EMAIL_PROXY_URL}"  # Email Proxy 地址
  api_token: "${EMAIL_PROXY_TOKEN}"
  sender_name: "PaperRadar"
  recipients:
    - "${EMAIL_RECIPIENT}"

# 运行配置
runtime:
  schedule: "10 9 * * *"  # cron 格式，每天早上 10 点 (容器时区)
  timezone: "Asia/Shanghai"
  retry_count: 3
  pdf_timeout: 120
  concurrent_filtering: 5  # Stage 1 轻量模型并发筛选
  concurrent_analysis: 20  # Stage 2 重量模型并发分析

# ===========================================
# EZproxy 配置 - 用于访问需要机构认证的期刊 PDF
# ===========================================
ezproxy:
  enabled: true  # 是否启用 EZproxy 认证
  headless: true  # 是否使用无头浏览器模式
  # 认证凭据通过环境变量配置:
  # - HKU_LIBRARY_UID: 图书馆用户ID
  # - HKU_LIBRARY_PIN: 图书馆密码/PIN
